var __extends=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},what;!function(t){var e=function(){function t(t,e){this._defaultPrevented=!1,this._target=null,this._type=t,this._eventInitDict=e}return t.prototype.preventDefault=function(){this._defaultPrevented=!0},Object.defineProperty(t.prototype,"eventInitDict",{get:function(){return this._eventInitDict},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"type",{get:function(){return this._type},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"defaultPrevented",{get:function(){return this._defaultPrevented},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"target",{get:function(){return this._target},set:function(t){this._target=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cancelable",{get:function(){return this._eventInitDict&&this._eventInitDict.cancelable},enumerable:!0,configurable:!0}),t}();t.WEvent=e}(what||(what={}));var what;!function(t){var e=function(){function t(){this._listeners={}}return t.prototype.addEventListener=function(t,e){this._listeners[t]||(this._listeners[t]=[]);var n,i=this._listeners[t];(n=i.indexOf(e))!=-1&&i.splice(n,1),i.push(e)},t.prototype.dispatchEvent=function(t){var e=this._listeners[t.type];if(e&&e.length){t.target=this;for(var n=0;n<e.length;n++)e[n](t)}return!t.cancelable||!t.defaultPrevented},t.prototype.removeEventListener=function(t,e,n){var i,o=this._listeners[t];o&&(i=o.indexOf(e))!=-1&&o.splice(i,1)},t.prototype.removeAllEventListener=function(t){this._listeners[t]=[]},t}();t.EventDispatcher=e}(what||(what={}));var what;!function(t){var e=function(t){function e(e,n,i,o){t.call(this,e,o),this._newValue=n,this._oldValue=i}return __extends(e,t),Object.defineProperty(e.prototype,"newValue",{get:function(){return this._newValue},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"oldValue",{get:function(){return this._oldValue},enumerable:!0,configurable:!0}),e.CHANGE="change",e.CHANGING="changing",e}(t.WEvent);t.ValueEvent=e}(what||(what={}));var what;!function(t){var e=function(e){function n(t){e.call(this),this._data=t}return __extends(n,e),Object.defineProperty(n.prototype,"data",{get:function(){return this._data},set:function(e){var n=this._data;n!=e&&this.dispatchEvent(new t.ValueEvent(t.ValueEvent.CHANGING,e,this._data,{bubbles:!1,cancelable:!0}))&&(this._data=e,this.dispatchEvent(new t.ValueEvent(t.ValueEvent.CHANGE,e,n)))},enumerable:!0,configurable:!0}),n.prototype.toString=function(){return this.data.toString()},n}(t.EventDispatcher);t.Value=e}(what||(what={}));var what;!function(t){var e=function(){function t(t,e,n,i){this._itemSelectedCallback=e,this._li=document.createElement("li"),this._a=document.createElement("a"),this._li.appendChild(this._a),this._a.href=n||"#",this._a.target=i||"_self",this._a.innerHTML=t,this._a.onclick=function(t){this._itemSelectedCallback&&this._itemSelectedCallback()}.bind(this)}return Object.defineProperty(t.prototype,"node",{get:function(){return this._li},enumerable:!0,configurable:!0}),t}();t.ContextMenuItem=e}(what||(what={}));var what;!function(t){var e=function(){function t(){this._node=document.createElement("div"),this._node.style.position="fixed",this._node.className=t.CSS_CLASS_NAME,this._ul=document.createElement("ul"),this._node.appendChild(this._ul)}return Object.defineProperty(t.prototype,"node",{get:function(){return this._node},enumerable:!0,configurable:!0}),t.prototype.addItem=function(t){this._ul.appendChild(t.node)},t.prototype.showMenu=function(e,n){t.hideCurrentMenu(),t._currentMenu=this,this._node.style.display="block",this._node.style.left=e+"px",this._node.style.top=n+"px",document.onmouseup=function(t){0==t.button&&this.hide()}.bind(this)},t.prototype.hide=function(){this._node.style.display="none"},t.hideCurrentMenu=function(){t._currentMenu&&t._currentMenu.hide()},t.CSS_CLASS_NAME="what-menu",t}();t.ContextMenu=e}(what||(what={})),function(){document.oncontextmenu=function(t){what.ContextMenu.hideCurrentMenu()}}();var what;!function(t){var e=function(){function e(n){this._width=new t.Value(0),this._height=new t.Value(0),this._useCustomContextMenu=!1,this.thisWidthValueChangeHandler=this.widthValueChangeHandler.bind(this),this.thisHeightValueChangeHandler=this.heightValueChangeHandler.bind(this),this.thisOnContextMenuHandler=this.onContextMenuHandler.bind(this),this._htmlNode=document.createElement(n),this._htmlNode[e.KEY_WHAT_COMPONENT]=this}return Object.defineProperty(e.prototype,"htmlNode",{get:function(){return this._htmlNode},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this.htmlNode.parentNode?this.htmlNode.parentNode[e.KEY_WHAT_COMPONENT]:null},enumerable:!0,configurable:!0}),e.prototype.css=function(t,e){switch(typeof t){case"string":this.htmlNode.style[t]=e;break;case"object":for(var n in t)this.css(n,t[n]);break;default:throw new Error("Invalid argument,the first argument must be a string or an object")}},e.prototype.addChild=function(t){this.htmlNode.appendChild(t.htmlNode)},e.prototype.removeChild=function(t){this.htmlNode.removeChild(t.htmlNode)},Object.defineProperty(e.prototype,"innerHTML",{get:function(){return this.htmlNode.innerHTML},set:function(t){this.htmlNode.innerHTML=t},enumerable:!0,configurable:!0}),e.prototype.widthValueChangeHandler=function(t){this.css("width",this.width.data+"px")},e.prototype.heightValueChangeHandler=function(t){this.css("height",this.height.data+"px")},Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(e){this._width&&this._width.removeEventListener(t.ValueEvent.CHANGE,this.thisWidthValueChangeHandler),this._width=e,this._width.addEventListener(t.ValueEvent.CHANGE,this.thisWidthValueChangeHandler),this.thisWidthValueChangeHandler(null)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(e){this._height&&this._height.removeEventListener(t.ValueEvent.CHANGE,this.thisHeightValueChangeHandler),this._height=e,this._height.addEventListener(t.ValueEvent.CHANGE,this.thisHeightValueChangeHandler),this.thisHeightValueChangeHandler(null)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"useCustomContextMenu",{get:function(){return this._useCustomContextMenu},set:function(t){this._useCustomContextMenu=t,this._useCustomContextMenu?this.htmlNode.addEventListener("contextmenu",this.thisOnContextMenuHandler):this.htmlNode.removeEventListener("contextmenu",this.thisOnContextMenuHandler)},enumerable:!0,configurable:!0}),e.prototype.onContextMenuHandler=function(t){this._useCustomContextMenu&&(t.preventDefault(),t.stopPropagation(),this.customContextMenu&&this.customContextMenu.showMenu(t.clientX,t.clientY))},Object.defineProperty(e.prototype,"customContextMenu",{get:function(){return this._customContextMenu},set:function(t){this._customContextMenu&&document.body.removeChild(this._customContextMenu.node),this._customContextMenu=t,this._customContextMenu&&(document.body.appendChild(this._customContextMenu.node),this._customContextMenu.hide())},enumerable:!0,configurable:!0}),e.KEY_WHAT_COMPONENT="whatComponent",e}();t.Component=e}(what||(what={}));var what;!function(t){var e=function(e){function n(t,n){e.call(this,t),this._thisTextChangeHandler=this.textChangeHandler.bind(this),this.text=n}return __extends(n,e),Object.defineProperty(n.prototype,"text",{get:function(){return this._text},set:function(e){this._text&&this._text.removeEventListener(t.ValueEvent.CHANGE,this._thisTextChangeHandler),this._text=e,this._text.addEventListener(t.ValueEvent.CHANGE,this._thisTextChangeHandler),this.refresh()},enumerable:!0,configurable:!0}),n.prototype.textChangeHandler=function(t){this.refresh()},n.prototype.refresh=function(){this.htmlNode.innerHTML=this.text.data},n}(t.Component);t.TextView=e}(what||(what={}));var what;!function(t){var e=function(e){function n(n){void 0===n&&(n=new t.Value("")),e.call(this,"input",n),this.willFresh=!0,this._thisNativeTextChangeHandler=this.nativeTextChangeHandler.bind(this),this._node=this.htmlNode,this._node.type="text",this._node.addEventListener("keyup",this._thisNativeTextChangeHandler)}return __extends(n,e),n.prototype.refresh=function(){this.willFresh&&(this._node.value=this.text.data)},n.prototype.nativeTextChangeHandler=function(t){this.willFresh=!1,this.text.data=this._node.value,this.willFresh=!0},n}(t.TextView);t.TextInput=e}(what||(what={}));var what;!function(t){var e=function(t){function e(e){t.call(this,"span",e)}return __extends(e,t),e}(t.TextView);t.Span=e}(what||(what={}));var what;!function(t){var e=function(t){function e(e){t.call(this,"h1",e)}return __extends(e,t),e}(t.TextView);t.H1=e}(what||(what={}));var what;!function(t){var e=function(t){function e(){t.call(this,"div")}return __extends(e,t),e}(t.Component);t.Div=e}(what||(what={}));var what;!function(t){var e=function(t){function e(){t.call(this),this.css("display","flex")}return __extends(e,t),e.prototype.flex=function(t){this.css("flex",t)},e}(t.Div);t.Box=e}(what||(what={}));var what;!function(t){var e=function(t){function e(){t.call(this),this.css("flex-direction","column")}return __extends(e,t),e}(t.Box);t.VBox=e}(what||(what={}));var what;!function(t){var e=function(t){function e(){t.call(this),this.css("flex-direction","row")}return __extends(e,t),e}(t.Box);t.HBox=e}(what||(what={}));var what;!function(t){var e=function(e){function n(){e.call(this),this._appWidth=new t.Value(0),this._appHeight=new t.Value(0),this.initApplicationProperties(),this.width=this.appWidth,this.height=this.appHeight,document.body.appendChild(this.htmlNode),this.resizeApplicationSize(),window.addEventListener("resize",this.windowResizeHandler.bind(this))}return __extends(n,e),n.prototype.windowResizeHandler=function(t){this.resizeApplicationSize()},n.prototype.resizeApplicationSize=function(){this.appWidth.data=window.innerWidth,this.appHeight.data=window.innerHeight},n.prototype.initApplicationProperties=function(){document.body.style.margin="0",document.body.style.overflow="hidden"},Object.defineProperty(n.prototype,"appWidth",{get:function(){return this._appWidth},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"appHeight",{get:function(){return this._appHeight},enumerable:!0,configurable:!0}),n}(t.Div);t.Application=e}(what||(what={}));var what;!function(t){var e=function(t){function e(){t.call(this),this.css("position","absolute")}return __extends(e,t),e}(t.Div);t.AbsoluteLayout=e}(what||(what={}));var what;!function(t){var e=function(t){function e(){t.call(this)}return __extends(e,t),e}(t.AbsoluteLayout);t.Sprite=e}(what||(what={}));var what;!function(t){var e=function(t){function e(){t.call(this)}return __extends(e,t),e}(t.AbsoluteLayout);t.Scene=e}(what||(what={}));var what;!function(t){var e=function(t){function e(){t.call(this),document.body.appendChild(this.htmlNode)}return __extends(e,t),e}(t.AbsoluteLayout);t.GameApplication=e}(what||(what={}));var what;!function(t){var e;!function(e){var n;!function(e){var n=function(e){function n(){e.call(this);var n=new t.Span(new t.Value("Please type here:"));this.addChild(n);var i=new t.TextInput;this.addChild(i);var n=new t.Span(i.text);this.addChild(n)}return __extends(n,e),n}(t.Application);e.Main=n,new n}(n=e.textinput||(e.textinput={}))}(e=t.examples||(t.examples={}))}(what||(what={}));